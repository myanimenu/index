<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <title>myhtmlist-vii</title>
    
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
    
    <style>
        /* Variáveis CSS para Cores (Mais fácil de gerenciar) */
        :root {
            /* Padrões (Modo Light) */
            --bg-color: white;
            --text-color: #333;
            --button-bg: #eee;
            --button-hover: #ddd;

            /* Cores Padrão da Scrollbar (Light Mode) */
            --scrollbar-thumb: #ccc;
            --scrollbar-track: #f1f1f1;
        }

        /* Definições do MODO DARK */
        .dark-mode {
            --bg-color: #1e1e1e;
            --text-color: #f0f0f0;
            --button-bg: #333;
            --button-hover: #444;

            /* Cores da Scrollbar no Dark Mode */
            --scrollbar-thumb: #555; /* Cor do polegar (arrastável) no dark mode */
            --scrollbar-track: #2a2a2a; /* Cor do trilho no dark mode */
        }
        
        /* ------------------------------------------- */
        /* ESTILO DA BARRA DE ROLAGEM (SCROLLBAR)      */
        /* ------------------------------------------- */
        
        /* 1. Largura da scrollbar para navegadores WebKit */
        ::-webkit-scrollbar {
            width: 10px;
        }

        /* 2. O trilho (fundo) */
        ::-webkit-scrollbar-track {
            background: var(--scrollbar-track);
        }

        /* 3. O polegar (o que você arrasta) */
        ::-webkit-scrollbar-thumb {
            background: var(--scrollbar-thumb);
            border-radius: 10px; /* Deixa o polegar arredondado */
        }

        /* 4. Estado de Hover do polegar */
        ::-webkit-scrollbar-thumb:hover {
            background: #888; /* Um pouco mais claro no hover */
        }

        /* ------------------------------------------- */
        /* Estilos Base e Comuns                       */
        /* ------------------------------------------- */
        
        body {
            margin: 0;
            padding: 0;
            background-color: var(--bg-color); 
            color: var(--text-color);
            transition: background-color 0.3s, color 0.3s;
            overflow-x: hidden;
            overflow-y: hidden;
        }

        #editor {
            /* ... (restante do #editor, sem alterações) */
            width: 100vw;
            height: 100vh;
            
            background-color: var(--bg-color);
            color: var(--text-color);
            
            font-family: 'Consolas', 'Courier New', monospace; 
            font-size: 14px;
            line-height: 1.5;
            
            border: none;
            resize: none;
            outline: none;
            
            padding: 10px;
            box-sizing: border-box;
            
            color: var(--text-color);
            opacity: 0.7;
            transition: background-color 0.3s, color 0.3s;
        }
        
        #editor:not(:placeholder-shown) {
              opacity: 1;
        }


        /* ------------------------------------------- */
        /* Estilo do Botão Toggle (Sol/Lua)            */
        /* ------------------------------------------- */

        #toggle-theme {
            position: fixed;
            bottom: 10px; 
            right: 20px; 
            
            width: 40px; 
            height: 40px;
            padding: 0; 
            display: flex; 
            justify-content: center;
            align-items: center;
            
            border-radius: 50%; 
            cursor: pointer;
            border: none;
            box-shadow: none; 
            font-size: 18px;

            background-color: var(--button-bg);
            color: var(--text-color);
            transition: background-color 0.3s, color 0.3s, transform 0.1s;
        }

        #toggle-theme:hover {
            background-color: var(--button-hover);
        }
        
        #toggle-theme:active {
            transform: scale(0.95); 
        }
    </style>
</head>
<body>
    
    <textarea id="editor" placeholder="Comece a digitar aqui..."></textarea>
    
    <button id="toggle-theme" title="Alternar Modo Claro/Escuro">
        <i id="theme-icon" class="fas fa-moon"></i> 
    </button>

    <script>
        // --- Constantes
        const STORAGE_KEY = 'blocoDeNotasConteudo';
        const THEME_KEY = 'editorTheme';
        const editor = document.getElementById('editor');
        const toggleButton = document.getElementById('toggle-theme');
        const iconElement = document.getElementById('theme-icon');

        // --- Lógica de Salvamento Automático
        function carregarConteudo() {
            const savedContent = localStorage.getItem(STORAGE_KEY);
            if (savedContent) {
                editor.value = savedContent;
            }
        }

        function salvarConteudo() {
            localStorage.setItem(STORAGE_KEY, editor.value);
        }

        // --- Lógica de Alternância de Tema
        function aplicarTema(tema) {
            if (tema === 'dark') {
                document.body.classList.add('dark-mode');
                // MODO ESCURO -> Mostra o SOL (opção de voltar para o Light)
                iconElement.classList.remove('fa-moon'); 
                iconElement.classList.add('fa-sun');
                localStorage.setItem(THEME_KEY, 'dark');
            } else {
                document.body.classList.remove('dark-mode');
                // MODO CLARO -> Mostra a LUA (opção de ir para o Dark)
                iconElement.classList.remove('fa-sun');
                iconElement.classList.add('fa-moon');
                localStorage.setItem(THEME_KEY, 'light');
            }
        }

        function toggleTheme() {
            const isDarkMode = document.body.classList.contains('dark-mode');
            // Alterna para o tema oposto
            aplicarTema(isDarkMode ? 'light' : 'dark');
        }

        // --- Configuração dos Eventos e Inicialização

        document.addEventListener('DOMContentLoaded', () => {
            // 1. Carregar Conteúdo
            carregarConteudo();
            
            // 2. Carregar Tema Salvo
            const savedTheme = localStorage.getItem(THEME_KEY) || 'light'; 
            aplicarTema(savedTheme);
            
            // 3. Ativar o Salvamento Automático
            editor.addEventListener('input', salvarConteudo);
            
            // 4. Ativar o Toggle de Tema
            toggleButton.addEventListener('click', toggleTheme);
        });

    </script>
</body>
</html>